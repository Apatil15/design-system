@use '../../a11y';
@use '../../motion';
@use '../../spacing';
@use '../../util';
@use '../../properties' as *;

@mixin control {
	color: prop('body-bg');

	:checked + &,
	:indeterminate + & {
		@include set-props(
			$bg-color: prop('primary'),
		);

		border-color: transparent;
	}

	.focus + &,
	:focus + & {
		@include a11y.focus-ring;
	}

	[aria-invalid='true'] + & {
		@include set-props(
			$checkbox-border: prop('error'),
		);
	}

	.disabled:checked + &,
	:disabled:checked + &,
	.disabled:indeterminate + &,
	:disabled:indeterminate + & {
		@include set-props($checkbox-bg: prop('disabled-20'));

		color: prop('body-bg');
		border-color: transparent;
	}

	> .#{util.prefix('icon')} {
		transform: scale(1.25);
	}
}

@mixin style {
	@include util.declare('checkbox') {
		.#{util.prefix('field__control--checkbox')} {
			@include control;
		}
	}
}
